<!DOCTYPE html>
<html>
<head>
    <title>Process Diagram</title>
    <script src="https://unpkg.com/force-graph"></script>
</head>
<body>
    <div id="graph"></div>
    <script>
        var graphData = {
            nodes: [
                {id: 'capital', label: 'Capital'},
                {id: 'trades', label: 'Trades'},
                {id: 'profit', label: 'Profit'}
            ],
            links: [
                {source: 'capital', target: 'trades', label: 'positive'},
                {source: 'trades', target: 'profit', label: 'positive'}
            ]
        };

        var colorMap = {
    "positive": 'green', // replace with your chosen color
    "negative": 'red',   // replace with your chosen color
};

        ForceGraph()(document.getElementById('graph'))
            .graphData(graphData)
            .nodeCanvasObject((node, ctx, globalScale) => {
                const label = node.id;
                const fontSize = 12/globalScale;
                ctx.font = `${fontSize}px Sans-Serif`;
                const textWidth = ctx.measureText(label).width;
                const bckgDimensions = [textWidth, fontSize].map(n => n + fontSize * 0.2); // some padding

                ctx.fillStyle = 'rgba(255, 255, 255, 0.8)';
                ctx.fillRect(node.x - bckgDimensions[0] / 2, node.y - bckgDimensions[1] / 2, ...bckgDimensions);
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillStyle = node.color;
                ctx.fillText(label, node.x, node.y);
            })
            .linkLabel('label')
            .nodeColor(() => 'blue')
            .linkColor(link => colorMap[link.label])
            .linkDirectionalArrowLength(6)
    </script>
</body>
</html>
